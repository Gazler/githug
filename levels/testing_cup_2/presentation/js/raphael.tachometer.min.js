Raphael.fn.tachometer=function(e,d){function b(){this.initialize.apply(this,arguments)}var a=b.prototype;a.initialize=function(j,o,i){var p=j.canvas.clientWidth||j.width,m=j.canvas.cliendHeight||j.height,l=Math.floor(p/2),k=Math.floor(m/2),q=Math.min(p,m),n=q-i.frameSize*2,g=Math.floor(q/2);this.drawBoard(j,l,k,q,g,i.frameSize);this.drawScale(j,l,k,n,i);if(i.number){this.drawNumber(j,l,k,n,i)}this.drawNeedle(j,l,k,n,o,i)};a.drawBoard=function(l,g,k,h,i,j){l.circle(g,k,i).attr(d.outerFrameAttr);l.circle(g,k,i-j).attr(d.innerFrameAttr);l.circle(g,k,i-j*2).attr(d.boardAttr)};a.drawScale=function(p,k,j,q,g){var s=g.scaleWidth,o=g.scaleLength,i=g.boardMargin,r=Math.ceil(s/2),n=Math.ceil(o/2);var t=this.scale(p,k,j,r,n,q,i,g.scaleAngleStart);this.cloneScale(t,k,j,g.shortScaleCount,g);var l=this.scale(p,k,j,s,o,q,i,g.scaleAngleStart);this.cloneScale(l,k,j,g.longScaleCount,g)};a.scale=function(n,k,j,s,l,p,i,g){var q=k-Math.floor(s/2),o=p-l-i;return n.rect(q,o,s,l).attr(d.scaleAttr).rotate(g,k,j)};a.cloneScale=function(l,h,n,m,k){var g=(k.scaleAngleEnd-k.scaleAngleStart)/m;for(var j=1;j<=m;j++){l.clone().rotate(g*j,h,n)}};a.drawNumber=function(p,n,l,t,h){var g=h.longScaleCount,q=(h.scaleAngleEnd-h.scaleAngleStart)/g,j=(h.numberMax-h.numberMin)/g,k=h.numberMargin,s=t/2-k,w=h.scaleAngleStart,v=null,u=null,r=null;for(var o=0;o<=g;o++){v=Math.round(j*o)+h.numberMin;if(o==0){v=v+h.numberUnit}u=n+Math.floor(s*Math.cos(Raphael.rad(q*o+90+w)));r=l+Math.floor(s*Math.sin(Raphael.rad(q*o+90+w)));p.text(u,r,v).attr(h.numberAttr).toFront()}};a.drawNeedle=function(v,k,j,h,z,i){var q=Math.floor(i.needlePivotWidth/2),s=i.needleMargin,l={start:k+q,middle:k,end:k-q},o={start:j,end:h-s},r="M"+l.start+" "+o.start+" L"+l.middle+" "+o.end+" L"+l.end+" "+o.start+" L"+l.start+" "+o.start,u=v.path(r).attr(i.needleAttr),g=v.circle(k,j,s).attr(i.outerNeedlePivotAttr),w=v.circle(k,j,s/2).attr(i.innerNeedlePivotAttr),p=v.set(),t=i.scaleAngleStart,y=i.scaleAngleEnd,x=i.numberMin,n=i.numberMax;p.push(u,g,w).attr(i.handAttr).rotate(t,k,j);this.p={value:x,hand:p,animation:i.needleAnimation,duration:i.needleAnimationDuration,easing:i.needleAnimationEasing,cx:k,cy:j,ss:t,se:y,ns:x,ne:n};this.set(z)};a.set=function(k,i){var j=this.p;k=(j.ne<k)?j.ne:((k<j.ns)?j.ns:k);var h=(j.se-j.ss)*((k-j.ns)/(j.ne-j.ns))+j.ss,g="r"+h+" "+j.cx+" "+j.cy;this.p.value=k;if(typeof i!="undefined"?i:j.animation){j.hand.animate({transform:g},j.duration,j.easing)}else{j.hand.transform(g)}};a.get=function(){return this.p.value};function f(g,i){for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]===Object(i[h])?f(g[h],i[h]):i[h]}}return g}d=f({boardMargin:6,boardAttr:{stroke:0,fill:"r#333:85-#000"},frameSize:6,outerFrameAttr:{stroke:"#b3b3b3","stroke-width":0.3,fill:"45-#ccc-#fff:50-#ccc"},innerFrameAttr:{stroke:"#ccc","stroke-width":0.3,fill:"45-#666-#fff:50-#666"},needleMargin:6,needlePivotWidth:6,needleAttr:{fill:"#f00","stroke-width":0},outerNeedlePivotAttr:{fill:"#f00","stroke-width":0},innerNeedlePivotAttr:{fill:"#fff","stroke-width":0},handAttr:{"stroke-width":0.3,stroke:"#fff"},needleAnimation:true,needleAnimationDuration:700,needleAnimationEasing:"bounce",number:true,numberMargin:34,numberAttr:{fill:"#fff","font-family":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"font-size":10},numberMin:0,numberMax:100,numberUnit:"%",scaleLength:10,scaleWidth:3,scaleAttr:{fill:"#fff"},scaleAngleStart:0,scaleAngleEnd:270,longScaleCount:10,shortScaleCount:50,interactive:false},d);var c=new b(this,e,d);return d.interactive?c:this};